# Cloudflare Pages Configuration
name = "manadoc-document-management"
compatibility_date = "2024-12-30"

[env.production]
# Pages configuration
# This will be used for Cloudflare Pages deployment

# Build configuration
[build]
command = "npm run build"
cwd = "."

[build.upload]
format = "directory"
dir = "./dist"

# Environment variables (set these in Cloudflare dashboard)
# VITE_API_URL = "https://your-api-url.com"
# VITE_APP_ENV = "production"

# Custom headers for security
[[headers]]
for = "/*"
[headers.values]
X-Frame-Options = "DENY"
X-Content-Type-Options = "nosniff"
X-XSS-Protection = "1; mode=block"
Referrer-Policy = "strict-origin-when-cross-origin"
Permissions-Policy = "camera=(), microphone=(), geolocation=()"

# Cache static assets
[[headers]]
for = "/assets/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

# SPA routing - redirect all non-asset requests to index.html
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
conditions = {header = "Accept", value = "text/html"}

# Asset files should be served directly
[[redirects]]
from = "/assets/*"
to = "/assets/:splat"
status = 200

# API routes (if you add backend later)
# [[redirects]]
# from = "/api/*"
# to = "https://your-api-url.com/api/:splat"
# status = 200
